---
import { Cloudinary } from "@cloudinary/url-gen";

const cld = new Cloudinary({
    cloud: {
        cloudName: "dnh8shpzv",
    },
});

const { src, ...props } = Astro.props;
let cldSrc = cld.image(src).format("auto").delivery("q_auto");

if (src.startsWith("https://")) {
    cldSrc.setDeliveryType("fetch");
}

interface Props {
    src: string;
    width: string;
    height: string;
    alt: string;
}

console.log(cldSrc);
// Randomize fetch remote image from cloudinary
---

<div class="flex justify-center items-center">
    <img src={cldSrc.toURL()} loading="lazy" {...props} />
</div>
